const _0x27971a=_0xc449;(function(_0x94dd77,_0xf40ba8){const _0x47651b=_0xc449,_0x5b7f1e=_0x94dd77();while(!![]){try{const _0xed39d3=-parseInt(_0x47651b(0x212))/0x1*(parseInt(_0x47651b(0x1ff))/0x2)+parseInt(_0x47651b(0x211))/0x3*(-parseInt(_0x47651b(0x237))/0x4)+-parseInt(_0x47651b(0x1e7))/0x5+parseInt(_0x47651b(0x1fa))/0x6*(parseInt(_0x47651b(0x23b))/0x7)+-parseInt(_0x47651b(0x241))/0x8+parseInt(_0x47651b(0x20a))/0x9+parseInt(_0x47651b(0x1f8))/0xa;if(_0xed39d3===_0xf40ba8)break;else _0x5b7f1e['push'](_0x5b7f1e['shift']());}catch(_0x327f4b){_0x5b7f1e['push'](_0x5b7f1e['shift']());}}}(_0x58f4,0xefea0));let color='#c80000',brushSize=0x10,shapeMode=_0x27971a(0x230),radian=0xc,canvas,ctx,previewCanvas,previewCtx,history=[],redoHistory=[],lastSaved=0x0,isDrawing=![],startX,startY,isEraserMode=![],guidesVisible=!![];document[_0x27971a(0x223)][_0x27971a(0x1fc)](_0x27971a(0x1ee),function(){},{'passive':![]}),window['addEventListener'](_0x27971a(0x236),()=>{const _0x377428=_0x27971a;canvas=document[_0x377428(0x239)](_0x377428(0x1eb)),ctx=canvas[_0x377428(0x201)]('2d'),previewCanvas=document[_0x377428(0x239)](_0x377428(0x233)),previewCtx=previewCanvas['getContext']('2d'),ctx[_0x377428(0x24f)]=previewCtx[_0x377428(0x24f)]=_0x377428(0x22a),ctx['lineCap']=previewCtx[_0x377428(0x23c)]='round';window['lucide']&&typeof lucide[_0x377428(0x1e1)]===_0x377428(0x21e)&&lucide['createIcons']();drawGuides(),canvas[_0x377428(0x1fc)](_0x377428(0x202),handleStart),canvas['addEventListener'](_0x377428(0x210),handleMove),canvas[_0x377428(0x1fc)]('mouseup',handleEnd),canvas[_0x377428(0x1fc)]('mouseleave',handleEnd),canvas['addEventListener'](_0x377428(0x1ee),handleStart,{'passive':![]}),canvas[_0x377428(0x1fc)](_0x377428(0x229),handleMove,{'passive':![]}),canvas[_0x377428(0x1fc)](_0x377428(0x246),handleEnd),canvas['addEventListener'](_0x377428(0x252),handleEnd),SmoothDraw['init'](canvas,ctx),SmoothDraw['setColor'](color),SmoothDraw[_0x377428(0x253)](brushSize),FloodFillTool[_0x377428(0x204)](canvas,ctx,hexToRgba(color)),FloodFillTool[_0x377428(0x1f4)](hexToRgba(color));const _0x339e4b=document[_0x377428(0x239)](_0x377428(0x220)),_0xca4b7c=document[_0x377428(0x239)](_0x377428(0x205)),_0x26760f=document[_0x377428(0x239)]('brushSliderToggle');_0x339e4b['addEventListener'](_0x377428(0x23e),()=>{const _0x2d35b3=_0x377428;brushSize=parseInt(_0x339e4b[_0x2d35b3(0x243)]),SmoothDraw[_0x2d35b3(0x253)](brushSize),_0xca4b7c['style']['width']=brushSize+'px',_0xca4b7c[_0x2d35b3(0x24c)][_0x2d35b3(0x21c)]=brushSize+'px';}),_0x26760f[_0x377428(0x1fc)](_0x377428(0x22d),()=>{const _0x1eac63=_0x377428,_0x8b7268=document[_0x1eac63(0x239)](_0x1eac63(0x1ed));_0x8b7268[_0x1eac63(0x227)]['toggle']('active');});const _0x180bb7=document['getElementById'](_0x377428(0x214)),_0x3a6e00=document[_0x377428(0x239)](_0x377428(0x249));_0x180bb7['value']=color,_0x3a6e00[_0x377428(0x24c)][_0x377428(0x1f3)]=color,_0x339e4b[_0x377428(0x243)]=brushSize,_0xca4b7c[_0x377428(0x24c)][_0x377428(0x24d)]=brushSize+'px',_0xca4b7c['style'][_0x377428(0x21c)]=brushSize+'px',_0xca4b7c[_0x377428(0x24c)][_0x377428(0x1e0)]=color,setShape(_0x377428(0x230)),resetCanvas();});function getCoords(_0x1a8c66){const _0x48514c=_0x27971a,_0x5731cf=canvas[_0x48514c(0x1f0)](),_0x4c4f40=canvas['width']/_0x5731cf[_0x48514c(0x24d)],_0x38ae8b=canvas[_0x48514c(0x21c)]/_0x5731cf[_0x48514c(0x21c)];let _0x3db2fc,_0x3c86d7;if(_0x1a8c66[_0x48514c(0x20e)]){const _0x5a80d3=_0x1a8c66['touches'][0x0]||_0x1a8c66['changedTouches'][0x0];_0x3db2fc=_0x5a80d3[_0x48514c(0x24e)],_0x3c86d7=_0x5a80d3[_0x48514c(0x1e4)];}else _0x3db2fc=_0x1a8c66[_0x48514c(0x24e)],_0x3c86d7=_0x1a8c66[_0x48514c(0x1e4)];return[(_0x3db2fc-_0x5731cf['left'])*_0x4c4f40,(_0x3c86d7-_0x5731cf[_0x48514c(0x1de)])*_0x38ae8b];}function handleStart(_0x3c0fc6){const _0x57ad32=_0x27971a;_0x3c0fc6[_0x57ad32(0x1e6)](),isDrawing=!![];const _0x9c728f=getCoords(_0x3c0fc6);startX=_0x9c728f[0x0],startY=_0x9c728f[0x1],shapeMode==='freehand'&&saveState(!![]);}function handleMove(_0x3ed335){const _0x4f574d=_0x27971a;if(!isDrawing)return;_0x3ed335['preventDefault']();const _0x3e147f=getCoords(_0x3ed335),_0x14c7c4=_0x3e147f[0x0],_0x1d45f9=_0x3e147f[0x1];previewCtx['clearRect'](0x0,0x0,previewCanvas[_0x4f574d(0x24d)],previewCanvas[_0x4f574d(0x21c)]),drawGuides();if(shapeMode===_0x4f574d(0x230))SmoothDraw[_0x4f574d(0x215)](_0x3ed335);else{if(shapeMode===_0x4f574d(0x1df))drawPreviewShape(startX,startY,_0x14c7c4,_0x1d45f9,_0x4f574d(0x1df));else shapeMode===_0x4f574d(0x1ec)&&drawPreviewShape(startX,startY,_0x14c7c4,_0x1d45f9,_0x4f574d(0x1ec));}}function handleEnd(_0x514981){const _0x589d25=_0x27971a;if(!isDrawing)return;isDrawing=![];const _0x32f65f=getCoords(_0x514981),_0x230b14=_0x32f65f[0x0],_0x29426e=_0x32f65f[0x1];previewCtx[_0x589d25(0x213)](0x0,0x0,previewCanvas[_0x589d25(0x24d)],previewCanvas['height']),drawGuides();if(shapeMode===_0x589d25(0x230))SmoothDraw[_0x589d25(0x21f)](_0x514981);else{if(shapeMode===_0x589d25(0x1df))drawShape(startX,startY,_0x230b14,_0x29426e,_0x589d25(0x1df)),saveState(!![]);else shapeMode==='circle'&&(drawShape(startX,startY,_0x230b14,_0x29426e,_0x589d25(0x1ec)),saveState(!![]));}}function drawShape(_0x3945de,_0x3d6f74,_0x2fedda,_0x1af842,_0x57c10e){const _0x566f80=_0x27971a,_0x34e55a=canvas[_0x566f80(0x24d)]/0x2,_0x2fd71d=canvas['height']/0x2,_0x2c2814=0x2*Math['PI']/radian;ctx[_0x566f80(0x1ef)]=color,ctx['lineWidth']=brushSize,ctx['lineCap']=_0x566f80(0x22a),ctx[_0x566f80(0x24f)]=_0x566f80(0x22a);for(let _0x4c35a8=0x0;_0x4c35a8<radian;_0x4c35a8++){const _0x257201=_0x4c35a8*_0x2c2814,[_0x2fb114,_0xc20f24]=rotatePoint(_0x3945de,_0x3d6f74,_0x34e55a,_0x2fd71d,_0x257201),[_0x25ef54,_0x5de71b]=rotatePoint(_0x2fedda,_0x1af842,_0x34e55a,_0x2fd71d,_0x257201);ctx[_0x566f80(0x1f6)]();if(_0x57c10e===_0x566f80(0x1df))ctx[_0x566f80(0x1f1)](_0x2fb114,_0xc20f24),ctx[_0x566f80(0x22b)](_0x25ef54,_0x5de71b),ctx[_0x566f80(0x238)]();else{if(_0x57c10e===_0x566f80(0x1ec)){const _0xfe1c0f=Math[_0x566f80(0x1e3)](_0x25ef54-_0x2fb114,_0x5de71b-_0xc20f24);ctx[_0x566f80(0x24b)](_0x2fb114,_0xc20f24,_0xfe1c0f,0x0,0x2*Math['PI']),ctx[_0x566f80(0x238)]();}}}}function _0xc449(_0x5f2b8d,_0x3130c3){const _0x58f470=_0x58f4();return _0xc449=function(_0xc449d3,_0x2d5dd6){_0xc449d3=_0xc449d3-0x1de;let _0x4da641=_0x58f470[_0xc449d3];return _0x4da641;},_0xc449(_0x5f2b8d,_0x3130c3);}function drawPreviewShape(_0x4f02a0,_0x4512d8,_0x1362c6,_0x20a54d,_0x33a6da){const _0x16d484=_0x27971a,_0x34f43e=canvas['width']/0x2,_0x5eae11=canvas[_0x16d484(0x21c)]/0x2,_0x1b8707=0x2*Math['PI']/radian;previewCtx['strokeStyle']=color,previewCtx[_0x16d484(0x1e2)]=brushSize,previewCtx[_0x16d484(0x23c)]=_0x16d484(0x22a),previewCtx[_0x16d484(0x24f)]=_0x16d484(0x22a);for(let _0x14f9fe=0x0;_0x14f9fe<radian;_0x14f9fe++){const _0x4f66a4=_0x14f9fe*_0x1b8707,[_0x3b7b73,_0x7b1862]=rotatePoint(_0x4f02a0,_0x4512d8,_0x34f43e,_0x5eae11,_0x4f66a4),[_0x585f9c,_0x1a07e8]=rotatePoint(_0x1362c6,_0x20a54d,_0x34f43e,_0x5eae11,_0x4f66a4);previewCtx['beginPath']();if(_0x33a6da===_0x16d484(0x1df))previewCtx[_0x16d484(0x1f1)](_0x3b7b73,_0x7b1862),previewCtx['lineTo'](_0x585f9c,_0x1a07e8),previewCtx[_0x16d484(0x238)]();else{if(_0x33a6da==='circle'){const _0xde3be5=Math[_0x16d484(0x1e3)](_0x585f9c-_0x3b7b73,_0x1a07e8-_0x7b1862);previewCtx[_0x16d484(0x24b)](_0x3b7b73,_0x7b1862,_0xde3be5,0x0,0x2*Math['PI']),previewCtx[_0x16d484(0x238)]();}}}}const SmoothDraw=((()=>{const _0x3ca012=_0x27971a;let _0x5d8f11,_0x330e26,_0x6bf938=_0x3ca012(0x22f),_0x465598=0x8,_0xb4f4d2=[];function _0x5ac19f(_0x4afea1,_0x283644){_0x5d8f11=_0x4afea1,_0x330e26=_0x283644;}function _0x4b594c(_0x14ba2b){_0x6bf938=_0x14ba2b;}function _0x3e1f47(_0x55741f){_0x465598=_0x55741f;}function _0x5bbd99(_0x298666){const _0x3269bc=_0x3ca012;if(shapeMode!==_0x3269bc(0x230))return;_0x298666[_0x3269bc(0x1e6)](),_0xb4f4d2=[getCoords(_0x298666)],saveState(!![]);}function _0x4ce1cf(_0x416ab3){const _0x5597e3=_0x3ca012;if(shapeMode!=='freehand')return;_0x416ab3['preventDefault']();const _0x2273f6=getCoords(_0x416ab3);_0xb4f4d2[_0x5597e3(0x257)](_0x2273f6);if(_0xb4f4d2[_0x5597e3(0x224)]>=0x3){const _0x353a46=_0x3fbb67(_0xb4f4d2[0x0],_0xb4f4d2[0x1]),_0x21b9eb=_0x3fbb67(_0xb4f4d2[0x1],_0xb4f4d2[0x2]);_0x3ebae8(_0x353a46,_0x21b9eb,_0xb4f4d2[0x1]),_0xb4f4d2[_0x5597e3(0x21b)]();}}function _0x2e8a28(_0x104709){const _0x9a1c12=_0x3ca012;if(shapeMode===_0x9a1c12(0x230)&&_0xb4f4d2[_0x9a1c12(0x224)]>0x1){const _0x1e0e62=_0xb4f4d2[_0xb4f4d2['length']-0x1];_0x3ebae8(_0xb4f4d2[0x0],_0x1e0e62,_0xb4f4d2[0x1]||_0xb4f4d2[0x0]);}_0xb4f4d2=[];}function _0x3ebae8(_0x59b2dc,_0x4aa0bc,_0x1ec5e8){const _0x479377=_0x3ca012,_0x479664=getSymmetryPoints(_0x59b2dc[0x0],_0x59b2dc[0x1]),_0x240abd=getSymmetryPoints(_0x1ec5e8[0x0],_0x1ec5e8[0x1]),_0xcec88c=getSymmetryPoints(_0x4aa0bc[0x0],_0x4aa0bc[0x1]);_0x330e26[_0x479377(0x1ef)]=_0x6bf938,_0x330e26[_0x479377(0x1e2)]=_0x465598,_0x330e26[_0x479377(0x23c)]=_0x479377(0x22a),_0x330e26[_0x479377(0x24f)]=_0x479377(0x22a);for(let _0x1020da=0x0;_0x1020da<_0x479664[_0x479377(0x224)];_0x1020da++){_0x330e26[_0x479377(0x1f6)](),_0x330e26[_0x479377(0x1f1)](_0x479664[_0x1020da][0x0],_0x479664[_0x1020da][0x1]),_0x330e26[_0x479377(0x250)](_0x240abd[_0x1020da][0x0],_0x240abd[_0x1020da][0x1],_0xcec88c[_0x1020da][0x0],_0xcec88c[_0x1020da][0x1]),_0x330e26[_0x479377(0x238)]();}}function _0x3fbb67(_0x114980,_0x23d3d5){return[(_0x114980[0x0]+_0x23d3d5[0x0])/0x2,(_0x114980[0x1]+_0x23d3d5[0x1])/0x2];}return{'init':_0x5ac19f,'setColor':_0x4b594c,'setBrushSize':_0x3e1f47,'start':_0x5bbd99,'move':_0x4ce1cf,'end':_0x2e8a28};})()),colorPicker=document[_0x27971a(0x239)](_0x27971a(0x214)),currentColor=document[_0x27971a(0x239)](_0x27971a(0x249)),brushPreview=document[_0x27971a(0x239)](_0x27971a(0x205));colorPicker[_0x27971a(0x1fc)]('input',()=>{const _0x32ff42=_0x27971a;color=colorPicker[_0x32ff42(0x243)],currentColor['style']['background']=color,brushPreview['style']['backgroundColor']=color,SmoothDraw['setColor'](color),FloodFillTool[_0x32ff42(0x1f4)](hexToRgba(color));});const FloodFillTool=((()=>{let _0x2cf613,_0x52048e,_0x35b02c=[0xff,0x0,0x0,0xff],_0x5c5f57=0x40;function _0x1f26d8(_0x4fbd63,_0x594723,_0x3341a6=[0xff,0x0,0x0,0xff]){const _0x29ad69=_0xc449;_0x2cf613=_0x4fbd63,_0x52048e=_0x594723,_0x35b02c=_0x3341a6,_0x2cf613['addEventListener'](_0x29ad69(0x22d),_0x3d3cfd),_0x2cf613[_0x29ad69(0x1fc)]('touchstart',_0x260350=>{const _0x55ed0c=_0x29ad69;_0x260350[_0x55ed0c(0x1e6)](),_0x3d3cfd(_0x260350[_0x55ed0c(0x20e)][0x0]);},{'passive':![]});}function _0x1317d6(_0x1eefe0){_0x35b02c=_0x1eefe0;}function _0x3d3cfd(_0x1b6cfe){const _0x20bb03=_0xc449;if(shapeMode!==_0x20bb03(0x244))return;_0x591897(!![]),setTimeout(()=>{const _0x830cf8=_0x20bb03,[_0x3878dd,_0x20ebf3]=getCoords(_0x1b6cfe),_0x34864e=_0x52048e[_0x830cf8(0x251)](0x0,0x0,_0x2cf613['width'],_0x2cf613[_0x830cf8(0x21c)]),_0x3e3804=_0x2cf613[_0x830cf8(0x24d)]/0x2,_0x18ed6f=_0x2cf613[_0x830cf8(0x21c)]/0x2,_0x42162e=0x2*Math['PI']/radian;for(let _0x2c87d6=0x0;_0x2c87d6<radian;_0x2c87d6++){const _0x527851=_0x2c87d6*_0x42162e,[_0x34930b,_0x8d7e23]=rotatePoint(_0x3878dd,_0x20ebf3,_0x3e3804,_0x18ed6f,_0x527851),_0x359356=Math[_0x830cf8(0x21d)](_0x34930b),_0x396157=Math[_0x830cf8(0x21d)](_0x8d7e23),_0x3b3c43=_0x337c5c(_0x34864e,_0x359356,_0x396157);_0x17fe39(_0x34864e,_0x359356,_0x396157,_0x3b3c43);}_0x52048e['putImageData'](_0x34864e,0x0,0x0),saveState(!![]),_0x591897(![]);},0x32);}function _0x591897(_0x485a18){const _0x4cb49f=_0xc449,_0x2d8efd=document[_0x4cb49f(0x239)](_0x4cb49f(0x222));if(!_0x2d8efd)return;_0x485a18?(_0x2d8efd['classList']['remove'](_0x4cb49f(0x1e9)),_0x2d8efd[_0x4cb49f(0x227)][_0x4cb49f(0x20b)]('show')):(_0x2d8efd['classList']['remove'](_0x4cb49f(0x1fe)),_0x2d8efd[_0x4cb49f(0x227)][_0x4cb49f(0x20b)]('hidden'));}function _0x17fe39(_0x2fb642,_0x55a0c5,_0x3bf77f,_0x4590a7){const _0x3168ac=_0xc449,_0x12ee7a=[[_0x55a0c5,_0x3bf77f]],_0x5602c3=_0x2fb642[_0x3168ac(0x24d)],_0x235494=_0x2fb642['height'],_0x258e62=_0x2fb642[_0x3168ac(0x1f7)],_0x56230e=new Uint8Array(_0x5602c3*_0x235494);function _0x6d8acd(_0x2e0744,_0x44b066){const _0x51d0fa=(_0x44b066*_0x5602c3+_0x2e0744)*0x4,_0x4d405c=[_0x258e62[_0x51d0fa],_0x258e62[_0x51d0fa+0x1],_0x258e62[_0x51d0fa+0x2],_0x258e62[_0x51d0fa+0x3]];return _0x589706(_0x4d405c,_0x4590a7);}function _0x7a17d1(_0x20e264,_0x11b830){const _0x16fa31=(_0x11b830*_0x5602c3+_0x20e264)*0x4;_0x258e62[_0x16fa31]=_0x35b02c[0x0],_0x258e62[_0x16fa31+0x1]=_0x35b02c[0x1],_0x258e62[_0x16fa31+0x2]=_0x35b02c[0x2],_0x258e62[_0x16fa31+0x3]=_0x35b02c[0x3];}while(_0x12ee7a['length']){const [_0x3bba7f,_0x15c219]=_0x12ee7a['pop']();if(_0x3bba7f<0x0||_0x15c219<0x0||_0x3bba7f>=_0x5602c3||_0x15c219>=_0x235494)continue;const _0x5426f=_0x15c219*_0x5602c3+_0x3bba7f;if(_0x56230e[_0x5426f])continue;_0x56230e[_0x5426f]=0x1;if(!_0x6d8acd(_0x3bba7f,_0x15c219))continue;_0x7a17d1(_0x3bba7f,_0x15c219),_0x12ee7a[_0x3168ac(0x257)]([_0x3bba7f+0x1,_0x15c219],[_0x3bba7f-0x1,_0x15c219],[_0x3bba7f,_0x15c219+0x1],[_0x3bba7f,_0x15c219-0x1]);}}function _0x337c5c(_0x7c852f,_0x4cd8d7,_0x4a699f){const _0x51915f=_0xc449,_0x21ee1d=Math['floor'](_0x4cd8d7),_0x54161d=Math['floor'](_0x4a699f);if(_0x21ee1d<0x0||_0x54161d<0x0||_0x21ee1d>=_0x7c852f[_0x51915f(0x24d)]||_0x54161d>=_0x7c852f[_0x51915f(0x21c)])return[0x0,0x0,0x0,0x0];const _0x36962d=(_0x54161d*_0x7c852f[_0x51915f(0x24d)]+_0x21ee1d)*0x4,_0x5cf51b=_0x7c852f[_0x51915f(0x1f7)];return[_0x5cf51b[_0x36962d],_0x5cf51b[_0x36962d+0x1],_0x5cf51b[_0x36962d+0x2],_0x5cf51b[_0x36962d+0x3]];}function _0x589706(_0x3b7136,_0x2330ea){const _0x2b5e28=_0x3b7136[0x0]-_0x2330ea[0x0],_0x3ce712=_0x3b7136[0x1]-_0x2330ea[0x1],_0x39878a=_0x3b7136[0x2]-_0x2330ea[0x2],_0x26c893=_0x3b7136[0x3]-_0x2330ea[0x3],_0x1b4c88=Math['sqrt'](_0x2b5e28*_0x2b5e28+_0x3ce712*_0x3ce712+_0x39878a*_0x39878a+_0x26c893*_0x26c893);return _0x1b4c88<=_0x5c5f57;}return{'init':_0x1f26d8,'setColor':_0x1317d6};})());function getSymmetryPoints(_0x13613c,_0x4fd244){const _0x297d8a=_0x27971a,_0x1e186a=canvas['width']/0x2,_0x1a3cc1=canvas['height']/0x2,_0x284f54=_0x13613c-_0x1e186a,_0x447bfe=_0x1a3cc1-_0x4fd244,_0x67aed4=Math[_0x297d8a(0x1e3)](_0x284f54,_0x447bfe),_0x5d5f00=Math[_0x297d8a(0x23a)](_0x284f54,_0x447bfe),_0x5f04fb=[];for(let _0x35c3ca=0x0;_0x35c3ca<radian;_0x35c3ca++){let _0x535b46=_0x5d5f00+Math['PI']*0x2/radian*_0x35c3ca,_0x17c98a=_0x1e186a+Math['sin'](_0x535b46)*_0x67aed4,_0x425385=_0x1a3cc1-Math[_0x297d8a(0x234)](_0x535b46)*_0x67aed4;_0x5f04fb[_0x297d8a(0x257)]([_0x17c98a,_0x425385]),_0x17c98a=_0x1e186a-Math[_0x297d8a(0x247)](_0x535b46)*_0x67aed4,_0x5f04fb['push']([_0x17c98a,_0x425385]);}return _0x5f04fb;}function rotatePoint(_0x22148a,_0x2d9dec,_0x338a95,_0x2d7242,_0x2c613a){const _0x397827=_0x27971a,_0xaa7470=_0x22148a-_0x338a95,_0x1dfb4c=_0x2d9dec-_0x2d7242,_0x2954f9=_0x338a95+_0xaa7470*Math['cos'](_0x2c613a)-_0x1dfb4c*Math[_0x397827(0x247)](_0x2c613a),_0x579715=_0x2d7242+_0xaa7470*Math['sin'](_0x2c613a)+_0x1dfb4c*Math[_0x397827(0x234)](_0x2c613a);return[_0x2954f9,_0x579715];}function hexToRgba(_0x4d2c6b){const _0x2f8a19=_0x27971a,_0x26073a=parseInt(_0x4d2c6b[_0x2f8a19(0x255)](0x1,0x2),0x10),_0x489658=parseInt(_0x4d2c6b['substr'](0x3,0x2),0x10),_0x2135ee=parseInt(_0x4d2c6b['substr'](0x5,0x2),0x10);return[_0x26073a,_0x489658,_0x2135ee,0xff];}function setShape(_0x403465){const _0x3bcbc0=_0x27971a;shapeMode=_0x403465,isEraserMode=![],document[_0x3bcbc0(0x228)]('.tool-btn')[_0x3bcbc0(0x245)](_0x70240a=>_0x70240a[_0x3bcbc0(0x227)][_0x3bcbc0(0x1e5)](_0x3bcbc0(0x206)));const _0x1fadef=document[_0x3bcbc0(0x239)]('btn-'+_0x403465);if(_0x1fadef)_0x1fadef[_0x3bcbc0(0x227)]['add'](_0x3bcbc0(0x206));updateBrushColor(color);}function saveState(_0x1ae6c8=![]){const _0x22ef22=_0x27971a,_0x213ae9=Date['now']();if(!_0x1ae6c8||_0x213ae9-lastSaved>0x32){history[_0x22ef22(0x257)](canvas[_0x22ef22(0x24a)]()),redoHistory=[];if(history[_0x22ef22(0x224)]>0x32)history[_0x22ef22(0x21b)]();lastSaved=_0x213ae9;}}function activateEraser(){const _0x46222e=_0x27971a;setShape(_0x46222e(0x230)),isEraserMode=!![],color=_0x46222e(0x217),updateBrushColor(color),document[_0x46222e(0x228)]('#shapeButtons\x20.tool-btn,\x20#btn-eraser')[_0x46222e(0x245)](_0x3e1e2e=>{const _0x24a94d=_0x46222e;_0x3e1e2e[_0x24a94d(0x227)][_0x24a94d(0x1e5)]('active');}),document[_0x46222e(0x239)](_0x46222e(0x1f2))['classList']['add'](_0x46222e(0x206));}function updateBrushColor(_0x4b3ed0){const _0x4e73ed=_0x27971a;!isEraserMode&&(color=_0x4b3ed0);if(SmoothDraw)SmoothDraw[_0x4e73ed(0x1f4)](_0x4b3ed0);if(FloodFillTool)FloodFillTool[_0x4e73ed(0x1f4)](hexToRgba(_0x4b3ed0));const _0x51718a=document['getElementById'](_0x4e73ed(0x214)),_0x1e34ec=document['getElementById']('currentColor'),_0x107513=document[_0x4e73ed(0x239)](_0x4e73ed(0x205));if(_0x51718a)_0x51718a[_0x4e73ed(0x243)]=_0x4b3ed0;if(_0x1e34ec)_0x1e34ec[_0x4e73ed(0x24c)]['backgroundColor']=_0x4b3ed0;if(_0x107513)_0x107513[_0x4e73ed(0x24c)][_0x4e73ed(0x1e0)]=_0x4b3ed0;}function setEraserMode(){const _0x340ac8=_0x27971a;isEraserMode=!![],document[_0x340ac8(0x228)](_0x340ac8(0x225))[_0x340ac8(0x245)](_0x67788e=>_0x67788e[_0x340ac8(0x227)][_0x340ac8(0x1e5)]('active')),document[_0x340ac8(0x239)](_0x340ac8(0x1f2))[_0x340ac8(0x227)][_0x340ac8(0x20b)]('active'),updateBrushColor('#ffffff');}function updateBrushColor(_0x41e60c){const _0x486e45=_0x27971a;if(SmoothDraw)SmoothDraw[_0x486e45(0x1f4)](_0x41e60c);if(FloodFillTool)FloodFillTool['setColor'](hexToRgba(_0x41e60c));}function undo(){const _0x3b7ed0=_0x27971a;if(history[_0x3b7ed0(0x224)]>0x1){const _0x38b1da=history[_0x3b7ed0(0x21a)]();redoHistory['push'](_0x38b1da);const _0x9ed152=new Image();_0x9ed152[_0x3b7ed0(0x256)]=history[history[_0x3b7ed0(0x224)]-0x1],_0x9ed152['onload']=()=>{const _0x1fbf4e=_0x3b7ed0;ctx[_0x1fbf4e(0x213)](0x0,0x0,canvas['width'],canvas[_0x1fbf4e(0x21c)]),ctx[_0x1fbf4e(0x235)](_0x9ed152,0x0,0x0);};}else history[_0x3b7ed0(0x224)]===0x1&&(redoHistory[_0x3b7ed0(0x257)](history[_0x3b7ed0(0x21a)]()),ctx[_0x3b7ed0(0x213)](0x0,0x0,canvas['width'],canvas[_0x3b7ed0(0x21c)]));}function redo(){const _0xb02e06=_0x27971a;if(redoHistory[_0xb02e06(0x224)]>0x0){const _0x364b28=redoHistory['pop']();history[_0xb02e06(0x257)](_0x364b28);const _0x4de8d1=new Image();_0x4de8d1[_0xb02e06(0x256)]=_0x364b28,_0x4de8d1['onload']=()=>{const _0x1533ef=_0xb02e06;ctx[_0x1533ef(0x213)](0x0,0x0,canvas['width'],canvas['height']),ctx['drawImage'](_0x4de8d1,0x0,0x0);};}}function resetCanvas(){const _0x1c0531=_0x27971a;ctx[_0x1c0531(0x213)](0x0,0x0,canvas['width'],canvas['height']),previewCtx[_0x1c0531(0x213)](0x0,0x0,previewCanvas[_0x1c0531(0x24d)],previewCanvas[_0x1c0531(0x21c)]),drawGuides(),history=[],redoHistory=[],saveState(!![]);}function downloadCanvas(){const _0x5996c0=_0x27971a,_0x3bf81d=document[_0x5996c0(0x239)]('drawCanvas'),_0x524993=document[_0x5996c0(0x20d)](_0x5996c0(0x232));_0x524993[_0x5996c0(0x24d)]=0xbb8,_0x524993['height']=0xbb8;const _0x59a4b0=_0x524993[_0x5996c0(0x201)]('2d');_0x59a4b0[_0x5996c0(0x221)]='white',_0x59a4b0['fillRect'](0x0,0x0,_0x524993[_0x5996c0(0x24d)],_0x524993[_0x5996c0(0x21c)]),_0x59a4b0[_0x5996c0(0x235)](_0x3bf81d,0x0,0x0,_0x524993[_0x5996c0(0x24d)],_0x524993[_0x5996c0(0x21c)]),_0x59a4b0['fillStyle']=_0x5996c0(0x248),_0x59a4b0['font']=_0x5996c0(0x22e),_0x59a4b0[_0x5996c0(0x240)]=_0x5996c0(0x23d),_0x59a4b0[_0x5996c0(0x218)](_0x5996c0(0x20c),_0x524993[_0x5996c0(0x24d)]-0x3c,_0x524993['height']-0x28);const _0x3157cb=document[_0x5996c0(0x239)](_0x5996c0(0x200));_0x3157cb[_0x5996c0(0x1f9)]=_0x524993[_0x5996c0(0x24a)](_0x5996c0(0x208)),_0x3157cb[_0x5996c0(0x1fd)]=_0x5996c0(0x1f5),_0x3157cb[_0x5996c0(0x22d)]();}function toggleGuides(){const _0x32d962=_0x27971a;guidesVisible=!guidesVisible,drawGuides();const _0x57cca8=document['getElementById'](_0x32d962(0x20f));_0x57cca8[_0x32d962(0x227)][_0x32d962(0x209)]('active',guidesVisible);}function drawGuides(){const _0x5e2bf0=_0x27971a;if(!guidesVisible){previewCtx['clearRect'](0x0,0x0,previewCanvas[_0x5e2bf0(0x24d)],previewCanvas[_0x5e2bf0(0x21c)]);return;}const _0x4f5a94=previewCanvas['width'],_0x20f246=previewCanvas['height'],_0x5c312f=_0x4f5a94/0x2,_0x44f79d=_0x20f246/0x2;previewCtx[_0x5e2bf0(0x213)](0x0,0x0,_0x4f5a94,_0x20f246),previewCtx[_0x5e2bf0(0x1ef)]=_0x5e2bf0(0x1e8),previewCtx['lineWidth']=0x2,previewCtx[_0x5e2bf0(0x1f6)](),previewCtx[_0x5e2bf0(0x1f1)](_0x5c312f,0x0),previewCtx[_0x5e2bf0(0x22b)](_0x5c312f,_0x20f246),previewCtx[_0x5e2bf0(0x1f1)](0x0,_0x44f79d),previewCtx[_0x5e2bf0(0x22b)](_0x4f5a94,_0x44f79d),previewCtx[_0x5e2bf0(0x238)]();const _0x5518c1=[0x1e,0x3c],_0xb39d96=Math['max'](_0x4f5a94,_0x20f246);previewCtx[_0x5e2bf0(0x226)](),previewCtx[_0x5e2bf0(0x242)](_0x5c312f,_0x44f79d),previewCtx['strokeStyle']=_0x5e2bf0(0x231),previewCtx[_0x5e2bf0(0x1e2)]=0x1,_0x5518c1[_0x5e2bf0(0x245)](_0x329903=>{const _0x210ff7=_0x5e2bf0,_0x2f0b34=_0x329903*Math['PI']/0xb4;previewCtx[_0x210ff7(0x1f6)](),previewCtx[_0x210ff7(0x1f1)](-_0xb39d96*Math[_0x210ff7(0x234)](_0x2f0b34),-_0xb39d96*Math['sin'](_0x2f0b34)),previewCtx['lineTo'](_0xb39d96*Math[_0x210ff7(0x234)](_0x2f0b34),_0xb39d96*Math[_0x210ff7(0x247)](_0x2f0b34)),previewCtx['stroke'](),previewCtx[_0x210ff7(0x1f6)](),previewCtx[_0x210ff7(0x1f1)](-_0xb39d96*Math[_0x210ff7(0x234)](-_0x2f0b34),-_0xb39d96*Math[_0x210ff7(0x247)](-_0x2f0b34)),previewCtx[_0x210ff7(0x22b)](_0xb39d96*Math[_0x210ff7(0x234)](-_0x2f0b34),_0xb39d96*Math[_0x210ff7(0x247)](-_0x2f0b34)),previewCtx[_0x210ff7(0x238)]();}),previewCtx[_0x5e2bf0(0x23f)]();const _0x2b692b=Math[_0x5e2bf0(0x216)](_0x4f5a94,_0x20f246)*0.48;previewCtx[_0x5e2bf0(0x207)]([0x5,0x5]),previewCtx[_0x5e2bf0(0x1f6)](),previewCtx[_0x5e2bf0(0x24b)](_0x5c312f,_0x44f79d,_0x2b692b,0x0,Math['PI']*0x2),previewCtx[_0x5e2bf0(0x238)](),previewCtx[_0x5e2bf0(0x207)]([]);}const toggleBtn=document[_0x27971a(0x239)]('toggleToolbar'),controls=document[_0x27971a(0x239)](_0x27971a(0x1ea));toggleBtn[_0x27971a(0x1fc)](_0x27971a(0x22d),()=>{const _0xf8af6c=_0x27971a;controls[_0xf8af6c(0x227)][_0xf8af6c(0x209)](_0xf8af6c(0x22c));const _0xf41010=controls['classList'][_0xf8af6c(0x254)](_0xf8af6c(0x22c));toggleBtn[_0xf8af6c(0x258)]=_0xf41010?_0xf8af6c(0x1fb):_0xf8af6c(0x203),window[_0xf8af6c(0x219)]&&typeof lucide[_0xf8af6c(0x1e1)]===_0xf8af6c(0x21e)&&lucide[_0xf8af6c(0x1e1)]();});function _0x58f4(){const _0x5227e4=['drawCanvas','circle','brushSliderContainer','touchstart','strokeStyle','getBoundingClientRect','moveTo','btn-eraser','background','setColor','mandala-square.png','beginPath','data','32526040zTDMgM','href','510sgfYHs','<i\x20data-lucide=\x22chevron-up\x22></i>','addEventListener','download','show','8tdAkJC','link','getContext','mousedown','<i\x20data-lucide=\x22chevron-down\x22></i>','init','brushPreview','active','setLineDash','image/png','toggle','2808540WBXgdA','add','Mandala\x20Art','createElement','touches','btn-guides','mousemove','45VXNcWD','151308pqdtAj','clearRect','colorPicker','move','min','#ffffff','fillText','lucide','pop','shift','height','floor','function','end','brushSlider','fillStyle','fillIndicator','body','length','.tool-btn','save','classList','querySelectorAll','touchmove','round','lineTo','collapsed','click','bold\x2048px\x20sans-serif','#000000','freehand','#bbb','canvas','previewCanvas','cos','drawImage','load','203292jHXYtx','stroke','getElementById','atan2','40054gBzEKQ','lineCap','right','input','restore','textAlign','4267152PTbtxg','translate','value','fill','forEach','touchend','sin','#999','currentColor','toDataURL','arc','style','width','clientX','lineJoin','quadraticCurveTo','getImageData','touchcancel','setBrushSize','contains','substr','src','push','innerHTML','top','line','backgroundColor','createIcons','lineWidth','hypot','clientY','remove','preventDefault','5836875TuRFUV','#aaa','hidden','controls'];_0x58f4=function(){return _0x5227e4;};return _0x58f4();}